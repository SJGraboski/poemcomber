<!DOCTYPE html>
<html>
<head>
	<title>professor overview</title>

		<!-- <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" integrity="sha384-1q8mTJOASx8j1Au+a5WDVnPi2lkFfwwEAa8hDDdjZlpLegxhjVME1fgjWPGmkzs7" crossorigin="anonymous"> -->

		<link rel="stylesheet" href="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css">
 <!-- <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.2/jquery.min.js"></script>-->
 	<script src="https://code.jquery.com/jquery.js"></script>
  <script src="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>

		<meta charset="utf-8">
		<style>
			body {background-color:blue;}
			a {background-color:yellow;}
			#mainbody {background-color:blue;margin:50px;}
			.col {border-color:black;background-color:blue;}
			div {text-align: center;vertical-align: middle;}
			.btn-info{margin:20px;}
			.btn-lg{width:200px;}
			.full-width{width:100%;height:100%;background-color: blue;}
			.gray{background-color: gray;margin:0px;}
			p{width:100%;}
			.container-fluid{padding:0px;background-color: gray;}
		</style>
</head>
<body>

	<div class="container">
		<!-- header and links -->
		<div class="col col-lg-12">
			<div style="float:left;background-color:gray;">
				<h1>PoemComb</h1>
			</div>
			<div style="float:right;">
				<a href="http://www.google.com/">Overview</a>
				<a href="http://www.google.com/">Assignment</a>
				<a href="http://www.google.com/">Comments</a>
				<a href="http://www.google.com/">Logout</a>
			</div>
		</div>
		<!-- clears the floats from previous column -->
		<div style="clear:both;"></div>
		<!-- mainbody -->
			<div class="col col-lg-12">
				<div class="panel panel-default">
					<div class="panel-heading">
						<h3 class="panel-title"><strong>Assignments</strong></h3>
					</div>
					<div class="panel-body" id="assignments">


					</div>
				</div>
			</div>

			<div class="col col-lg-12">
				<div class="panel panel-default">
					<div class="panel-heading">
						<h3 class="panel-title"><strong>Students</strong></h3>
					</div>
					<div class="panel-body" id="students">


					</div>
				</div>
			</div>


		</div>
	




	


<script type="text/javascript">

function getAssignments(){
		var currentURL = window.location.origin;

		

		$.get(currentURL + "/api/professoroverview/assignments", function(data){
			
			console.log("Assignment");
			console.log(data);

			for(var i = 0 ; i < data.length ; i++){

				var assignment = $('<div>');
				assignment.append("<a href='/comments/" + data[i].id + "/'>" + data[i].title  + ", by " + data[i].author +"</a>")
				$("#assignments").append(assignment);
			}
		

		})
}
function getStudents(){
		var currentURL = window.location.origin;

		
		var dataArr = [];
		$.get(currentURL + "/api/professoroverview/students", function(data){
			console.log(data);
				dataArr = data;
		$.each(dataArr, function(i){
					var id = dataArr[i].id;
					var obj = {"id": id };
			$.post(currentURL + "/api/professoroverview/studentcomments", obj , function(c_data){
				console.log(i);
				var student = $('<div class="students" data-id=' + dataArr[i].id +'>');
				student.append("<h4>" + dataArr[i].username  + "<h4>");
				if (c_data.length > 1) {
					var list = $('<ul>');
					for (var j = 0; j < c_data.length; j++){
						list.append("<li><a href='/comments/" + c_data[j].assignment.id + "'>For \"" +
												c_data[j].assignment.title + "\"</a>: " + c_data[j].comment + "</li>");
					}
					student.append(list);
				}
				$("#students").append(student);
			})
		})			
	})
	}

 $(document).on('click', '.students', function(){
 	
 	var currentURL = window.location.origin;
 	var id = $(this).attr('data-id');
 	var obj = {id:id };



 
 	console.log("test");
 	console.log(data);
})


getAssignments();
getStudents();
</script>

</body>
</html>