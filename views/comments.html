<!DOCTYPE html>
<html>
<head>
    <title>poem</title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" integrity="sha384-1q8mTJOASx8j1Au+a5WDVnPi2lkFfwwEAa8hDDdjZlpLegxhjVME1fgjWPGmkzs7" crossorigin="anonymous">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.2/jquery.min.js"></script>
  <script src="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>
  <script src='https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.13.0/moment.js'></script>
        <meta charset="utf-8">
        <style>
        </style>
</head>
<body>
<div class = "container">
  <div class="row">
    <div class="col col-lg-12">
      <div style="float:left;background-color:gray;">
          <h1>PoemComber</h1>
      </div>
    </div>
  </div>
          
  <div class="row">
     <div class="col-md-8">
        <div id="poem">
        <!-- Poem Goes Here -->
        </div>
    </div>
    <div class="col-md-4">
      <div class="assignment">
        <h2>Assignment</h2>
        <div id="assignmentContent">
        <!-- Assignment stuff goes here -->
        </div>
        <div id="comments">
        <!-- Comments go here -->
        </div>
      </div>
    </div>
  </div>
</div>
</div>
<script type="text/javascript">
function getPoem(){

/*
  data{
title: “title in here”,
author: “author in here”,
poem: “poem in here”,
createdAt: timestamp from db,
comments: [
comment: {
startline: x,
endline: y
}, comment: {
startline: x,
endline: y
}
]
      };
*/
  console.log(window.location.pathname);
  var currentURL = window.location.pathname;
  console.log(currentURL);



  $.get('/api' + currentURL, function(result){
    // format timestamp
    result.createdAt = moment(result.createdAt).format("MMMM DD, YYYY");
    var contentDiv = $('<div>');
    contentDiv.append('<h4>'+ result.title + '<h4>');
    contentDiv.append('<h5>' + result.author + '<h5>');
    contentDiv.append(result.poem);
    $('#poem').html(contentDiv);
    var assignmentDiv = $('<div>');
    assignmentDiv.append('<p>' + result.summary + '</p>');
    assignmentDiv.append('<p>' + result.createdAt + '</p>');
    $('#assignmentContent').html(assignmentDiv);
    console.log(result);
    // var commentDiv = $('<div>');
    // for(var i = 0 ; i < result.comments.length ; i++){
    // commentDiv.append('<div>'+ result.comments[i].startline + "," + result.comments[i].endline +'<div>');
    // }
    // $('#comments').html(commentDiv);
  });
}

getPoem();
</script>
</body>
</html>
